<template>
    <template if:true={loader}>
        <lightning-spinner alternative-text="Loading" size="medium">
            
        </lightning-spinner>
   </template>
    <div class="slds-var-m-top_medium slds-card slds-var-p-vertical_small slds-var-p-horizontal_large">
    <lightning-card>
        <h1 slot="title" class="slds-text-heading_large">
            Your Financing Quotes
         
            <div class="slds-text-body_regular">
                {itemCount} items; Updated&nbsp;  
                <lightning-relative-date-time value={now}></lightning-relative-date-time>
            </div>
        </h1>
        <div class="slds-card__header slds-grid">
            <div class="slds-text-body_regular">
               Create a new Quote or search for an existing Quote to view, submit for credit approval.
            </div>
        </div>

        <div class="slds-grid" slot="actions">
            <div class="slds-col">
                <lightning-button variant="brand" title="Create New Quote" label="Create New Quote" onclick={createQuoteButton}>
                </lightning-button>
            </div>
        </div>


        <div class="slds-grid slds-gutters">
            <div class="slds-col slds-size_9-of-12 ">
                <lightning-layout>
                    <lightning-layout-item padding="around-small" size=3>
                        <div class="slds-var-p-around_small ">
                            <lightning-combobox class="slds-var-m-right_small" name="applicationDate" label="Created Date" value={applicationDate}
                                                placeholder="All Time"
                                                options={applicationDatePickListValues}
                                                onchange={handleChangeDate}>
                            </lightning-combobox>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size=3>
                        <div class="slds-var-p-around_small ">
                            <lightning-combobox name="partnerStatus" label="Status" value={partnerStatus}
                                               
                                                options={partnerStatusPickListValues}
                                                onchange={handleChangeStatus}>
                            </lightning-combobox>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item padding="around-small" size=3>
                        <div class="slds-var-p-around_small ">
                            <lightning-input type="text" name="salesRep" label="Sales Rep"
                                autocomplete="nope" class="input"></lightning-input>
                           <!-- <c-reusable-custom-dropdown-with-search-lwc field-required-off="true"  bold-label="false" auto-complete-off="nope" options={saleRapOptions} error-message="Enter a valid sales rep" value={saleRapValue} field-label="Sales Rep" placeholder="Enter Sales Rep" onchange={onSalesRepChange} >
                            </c-reusable-custom-dropdown-with-search-lwc>
                            <div style="color:rgb(234, 0, 30)">
                                {errorMsg}
                            </div>-->
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
            <div class="slds-col slds-size_3-of-12">
                <lightning-layout>
                    <lightning-layout-item padding="around-small size=6">
                        <div class="slds-var-p-around_small " onkeyup={handleKeyUp}>
                            <lightning-input type="search" name="allfieldSearch"
                                             label=""
                                             placeholder="Search this list..."
                                             onchange={resetList}
                                             autocomplete="off">
                            </lightning-input>
                        </div>
                    </lightning-layout-item>
                </lightning-layout>
            </div>
        </div>
        <div class="slds-box" style="height: 500px;">
            <lightning-datatable
                    data={quotes}
                    columns={columns}
                    key-field="OpportunityId"
                    onloadmore={loadMoreData}
                    load-more-offset=20
                    enable-infinite-loading={enableInfiniteLoading}
                    sorted-by={sortBy}
                    sorted-direction={sortDirection}
                    onsort={updateColumnSorting}
                    hide-checkbox-column="true"
                    column-widths-mode="auto"
                    onrowaction={handleRowAction}>
            </lightning-datatable>
            {loadMoreStatus}
        </div> 
    </lightning-card>
    </div>
</template>