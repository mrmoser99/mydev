<!--
 - Created by ShiqiSun on 11/18/2021.
 - Fixed bug 870385 - Geetha on 10/6/2022
-->

<!-- assetcreation -->
<template>
    <div if:true={loading}>
        <lightning-spinner alternative-text="Loading..." variant="brand"></lightning-spinner>
    </div>
    <div class="assetBody">
        <lightning-layout multiple-rows>
            <lightning-layout-item size=6 class="slds-p-right_small">
                <lightning-combobox name="make" label="Make"
                                    value={asset.makeId}
                                    options={makePicklist} onchange={handleDependentChange} 
                                    field-level-help="test" disabled={isMakeDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-combobox name="assetType" label="Asset Type / ITA Class"
                                    value={asset.assetTypeId}
                                    options={assetTypePicklist} onchange={handleDependentModelChange}
                                    field-level-help="test" disabled={isAssetTypeDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6 class="slds-p-right_small">
                <lightning-combobox name="model" label="Model"
                                    value={asset.modelId}
                                    options={modelPicklist} onchange={handleDependentFieldsChange}
                                    field-level-help="test" disabled={isModelDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-combobox name="mastType" label="Mast Type"
                                    value={asset.mastType}
                                    options={mastList} onchange={handleChange}
                                    field-level-help="test" disabled={isRestDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6 class="slds-p-right_small">
                <lightning-combobox name="assetOperating" label="Asset Operating Environment"
                                    value={asset.assetOperating}
                                    options={assetOperatingList}
                                    onchange={handleChange} field-level-help="test" disabled={isRestDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-combobox name="annualHours" label="Annual Hours"
                                    value={asset.annualHours}
                                    options={annualHoursList}
                                    onchange={handleChange} field-level-help="test" disabled={isRestDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6 class="slds-p-right_small">
                <lightning-combobox name="batteryIncluded" label="Battery Included"
                                    value={asset.batteryIncluded}
                                    options={batteryIncludedList}
                                    onchange={handleChange} field-level-help="test" disabled={isBatteryIncludedDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-input type="number"
                                 name="numberOfUnits"
                                 label="Number of Units"
                                 required="true"
                                 value={asset.numberOfUnits}
                                 onchange={handleChange}></lightning-input>
            </lightning-layout-item>
            <lightning-layout-item size=6 class="slds-p-right_small">
                <lightning-input type="text"
                                 name="unitSalesPrice"
                                 data-id="unitSalesPrice"
                                 label="Unit Sales Price"
                                 required="true"
                                 value={asset.unitSalesPrice}
                                 onblur={callSubsidies}
                                 onchange={handleChangeSalesPrice}
                                 field-level-help='test'></lightning-input><!--onblur={callSubsidies}-->
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-combobox name="subsidy" label="Subsidy"
                                    data-id="subsidy"
                                    value={asset.subsidy}
                                    options={subsidyList}
                                    onchange={handleChangeSubsidy} field-level-help="This field populates when you edit Unit Sales Price and then click somewhere else." disabled={isSubsidyDisabled}>
                </lightning-combobox>
            </lightning-layout-item>
            <!--<lightning-layout-item size=6 class="slds-p-right_small">
                &nbsp;
            </lightning-layout-item>
            <lightning-layout-item size=6>
                <lightning-button label="Get Subsidy" onclick={callSubsidies}></lightning-button>
            </lightning-layout-item>-->
            <lightning-layout-item size=12>
                <lightning-button class="slds-m-right_small" variant="base" label="+ Add Asset" title="+ Add Asset" onclick={handleAddAsset}></lightning-button>
                <lightning-button variant="base" label="- Delete Asset" title="- Delete Asset" onclick={handleDeleteAsset} if:false={asset.isFirst}></lightning-button>
            </lightning-layout-item>
        </lightning-layout>
    </div>
</template>